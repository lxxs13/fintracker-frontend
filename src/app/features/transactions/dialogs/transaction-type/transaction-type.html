<div class="flex justify-center !w-full">
  <p-tabs [value]="tabIndexSelected" class="w-full">
    <p-tablist>
      <p-tab [value]="0" (click)="tabIndexSelected = 0" class="w-[50%]">Tipo de transacción</p-tab>
      <p-tab [value]="1" (click)="tabIndexSelected = 1" [disabled]="!value" class="w-[50%]">Detalles de la
        transacción</p-tab>
    </p-tablist>
    <p-tabpanels>
      <p-tabpanel [value]="0">
        <p-selectbutton class="flex flex-col gap-2 w-full" size="large" [options]="transactionTypes" [(ngModel)]="value"
          optionLabel="label" optionValue="value" aria-labelledby="basic">
          <ng-template pTemplate="item" let-option>
            <div class="w-full flex flex-row gap-4 items-center justify-start">
              <i [class]="'pi ' + option.icon"></i>

              <div class="flex flex-col justify-start items-start gap-1">
                <span class="text-lg">{{ option.label }}</span>
                <span class="text-xs">{{ option.desc }}</span>
              </div>

            </div>
          </ng-template>
        </p-selectbutton>
      </p-tabpanel>

      <p-tabpanel [value]="1">
        <div class="flex flex-col gap-4">
          <p-float-label variant="on" class="mt-2">
            <p-inputnumber [(ngModel)]="balance" inputId="balnce_input" mode="currency" currency="USD" locale="en-US"
              autocomplete="off" size="large" fluid />
            <label for="balance_input">Balance</label>
          </p-float-label>

          <p-float-label variant="on" class="mt-2">
            <input pInputText fluid id="input_description" pSize="large" [(ngModel)]="desc" [autocomplete]="false" />
            <label for="input_description">Descripción</label>
          </p-float-label>

          <p-float-label variant="on" class="mt-2">
            <p-datepicker [(ngModel)]="spentDate" fluid dateFormat="dd/mm/yy" appendTo="body" size="large" />
            <label for="input_transaction_date">Fecha de transacción</label>
          </p-float-label>

          <p-float-label variant="on" class="mt-2">
            <p-select id="input_account" [options]="accountsGroup" [(ngModel)]="selectedAccount" [group]="true" size="large" fluid>
              <ng-template let-group #group>
                <div class="flex items-center">
                  <span>{{ group.label }}</span>
                </div>
              </ng-template>
            </p-select>
            <label for="input_account">Seleccione cuenta</label>

          </p-float-label>

          <p-float-label variant="on" class="mt-2">
            <p-select id="input_selected_category"
              [options]="!categoryTypeList() ? categoriesSpendList : categoriesIncomesList" size="large"
              [(ngModel)]="selectedCategory" optionLabel="categoryName" fluid appendTo="body">
              <ng-template pTemplate="item" let-item>
                <div class="flex items-center gap-2">
                  <span class="material-symbols-outlined"
                    [ngClass]="['rounded-md', 'p-2', 'bg-' + item.iconColor + '/10', 'text-' + item.iconColor + '/90']">
                    {{ item.iconLabel }}
                  </span>

                  <span>{{ item.categoryName }}</span>
                </div>
              </ng-template>
            </p-select>

            <label for="input_selected_category">Categoría</label>
          </p-float-label>

          <p-float-label variant="on">
            <textarea id="input_descripcion" rows="3" cols="30" pTextarea [(ngModel)]="notes" fluid></textarea>
            <label for="input_descripcion">Notas</label>
          </p-float-label>

        </div>
      </p-tabpanel>
    </p-tabpanels>

    <div class="sticky bottom-0 z-20 px-4 py-3 bg-[var(--p-surface-0)]/90 backdrop-blur-md
      border-t border-[var(--p-content-border-color)]">
      <div class="flex justify-end gap-4">
        <button pButton severity="secondary" (click)="goBack()">
          @if (tabIndexSelected === 0) { <span>Cancelar</span> }
          @else if (tabIndexSelected === 1) { <span>Regresar</span> }
        </button>

        <button pButton severity="primary" (click)="nextStep()" [disabled]="!value">
          @if (tabIndexSelected === 0) { <span>Siguiente</span> }
          @else if (tabIndexSelected === 1) { <span>Guardar</span> }
        </button>
      </div>
    </div>
  </p-tabs>
</div>